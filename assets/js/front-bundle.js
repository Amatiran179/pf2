function ct(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const L=(t,e=document)=>e.querySelector(t),I=(t,e=document)=>Array.from(e.querySelectorAll(t)),N="pf2:cta_click",b="pf2_cta_events",F='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])';let s=null,c=null;const R=t=>t?window.CSS&&typeof window.CSS.escape=="function"?window.CSS.escape(t):t.replace(/([#.;?+*~\':"!^$\[\]()=>|\/\\])/g,"\\$1"):"",f=t=>t?document.querySelector('[data-pf2-cta-modal="'.concat(R(t),'"]')):null,Y=t=>t?t.querySelector("[data-pf2-cta-modal-dialog]"):null,q=()=>{try{const t=window.localStorage?window.localStorage.getItem(b):null;if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return[]}},P=t=>{try{window.localStorage&&window.localStorage.setItem(b,JSON.stringify(t))}catch(e){}},B=t=>{const e=q();e.push(t),e.length>50&&e.splice(0,e.length-50),P(e)},H=(t,e)=>{const n=(t||"").replace(/[^0-9]/g,""),o=e?"?text=".concat(encodeURIComponent(e)):"";return"https://wa.me/".concat(n).concat(o)},J=t=>{if(!t)return null;try{const e=JSON.parse(t);return e&&typeof e=="object"?e:null}catch(e){return null}},U=t=>{var e,n;window.dispatchEvent(new CustomEvent(N,{detail:t})),(n=(e=window==null?void 0:window.wp)==null?void 0:e.hooks)!=null&&n.doAction&&window.wp.hooks.doAction("pf2_cta_clicked",t)},M=t=>{if(!t)return;const e=f(t);if(!e)return;s=t,c=document.activeElement instanceof HTMLElement?document.activeElement:null,e.removeAttribute("hidden"),e.setAttribute("aria-hidden","false"),e.classList.add("is-open");const n=Y(e);n&&n.focus({preventScroll:!0}),document.addEventListener("keydown",A)},_=(t=s)=>{if(!t)return;const e=f(t);e&&(e.setAttribute("aria-hidden","true"),e.classList.remove("is-open"),e.setAttribute("hidden","hidden"),s===t&&(s=null),s||document.removeEventListener("keydown",A),c&&typeof c.focus=="function"&&c.focus({preventScroll:!0}),c=null)},A=t=>{if(!s)return;if(t.key==="Escape"){t.preventDefault(),_(s);return}if(t.key!=="Tab")return;const e=f(s);if(!e)return;const n=I(F,e);if(!n.length){t.preventDefault();return}const o=n[0],a=n[n.length-1],r=t.shiftKey,i=document.activeElement;!r&&i===a?(t.preventDefault(),o.focus()):r&&i===o&&(t.preventDefault(),a.focus())},V=t=>{const e=t.target.closest("[data-pf2-cta]");if(!e)return;const{pf2Cta:n="inline",pf2CtaPhone:o="",pf2CtaText:a,pf2CtaPost:r,pf2CtaContext:i}=e.dataset,T=J(i),m=a||e.textContent.trim(),d=H(o,m),K=new Date().toISOString(),h=r?parseInt(r,10):null,w={type:n,phone:o,text:m,url:d,timestamp:K,postId:Number.isInteger(h)?h:null,context:T};B(w),U(w),e.tagName==="A"&&e.setAttribute("href",d),t.preventDefault(),window.open(d,"_blank","noopener")||(window.location.href=d)},W=t=>{const e=t.target.closest("[data-pf2-cta-open]");e&&(t.preventDefault(),M(e.dataset.pf2CtaOpen))},j=t=>{const e=t.target.closest("[data-pf2-cta-modal-close]");if(!e)return;t.preventDefault();const n=e.closest("[data-pf2-cta-modal]"),o=n?n.dataset.pf2CtaModal:null;_(o||void 0)},S=()=>{document.addEventListener("click",V),document.addEventListener("click",W),document.addEventListener("click",j)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S,{once:!0}):S();const D=t=>!!f(t),k=()=>{const t=L("[data-pf2-cta-modal]");return t?t.dataset.pf2CtaModal:null},X="pf2_cta_floating_dismissed",g="is-visible",z=200,u=[],x=t=>"".concat(X,":").concat(t),E=()=>{if(!u.length)return;u.some(e=>!e.dismissed)||window.removeEventListener("scroll",p)},G=t=>{var e;try{return((e=window.localStorage)==null?void 0:e.getItem(x(t)))==="1"}catch(n){return!1}},Q=t=>{var e;try{(e=window.localStorage)==null||e.setItem(x(t),"1")}catch(n){}},l=(t,e)=>{e?(t.removeAttribute("hidden"),t.setAttribute("aria-hidden","false"),t.classList.add(g)):(t.setAttribute("aria-hidden","true"),t.classList.remove(g),t.setAttribute("hidden","hidden"))},p=()=>{const t=window.scrollY>z;u.forEach(e=>{e.dismissed||l(e.element,t)})},v=()=>{const t=I("[data-pf2-cta-floating]");t.length&&(t.forEach(e=>{const n=e.dataset.pf2CtaFloatingKey||"default",o={element:e,key:n,dismissed:G(n)};u.push(o),o.dismissed,l(e,!1);const a=e.querySelector("[data-pf2-cta-floating-dismiss]");a&&a.addEventListener("click",r=>{r.preventDefault(),o.dismissed=!0,Q(n),l(e,!1),E()})}),window.addEventListener("scroll",p,{passive:!0}),p(),E())};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v,{once:!0}):v();const Z="pf2_cta_exit_intent",tt=3e3;let y=null;const O=t=>"".concat(Z,":").concat(t),et=()=>{const t=k();return t?D(t):!1},nt=t=>{var e;try{return((e=window.sessionStorage)==null?void 0:e.getItem(O(t)))==="1"}catch(n){return!1}},ot=t=>{var e;try{(e=window.sessionStorage)==null||e.setItem(O(t),"1")}catch(n){}},st=()=>{const t=k();!t||!D(t)||nt(t)||(ot(t),M(t),document.removeEventListener("mouseleave",$))},at=()=>{window.clearTimeout(y),y=window.setTimeout(st,tt)},$=t=>{t.clientY>0||at()},C=()=>{et()&&document.addEventListener("mouseleave",$)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C,{once:!0}):C();document.addEventListener("DOMContentLoaded",()=>{const t=L("body");t&&t.classList.add("pf2-js-ready")});export{ct as __vite_legacy_guard};
